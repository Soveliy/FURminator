!function(o){var y,e,t,b=(e=document.createElement("input"),t="onpaste",e.setAttribute(t,""),("function"==typeof e[t]?"paste":"input")+".mask"),a=navigator.userAgent,g=/iphone/i.test(a),k=/android/i.test(a);o.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"},o.fn.extend({caret:function(e,t){var a;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&((a=this.createTextRange()).collapse(!0),a.moveEnd("character",t),a.moveStart("character",e),a.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(a=document.selection.createRange(),e=0-a.duplicate().moveStart("character",-1e5),t=e+a.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(t,f){var a,p,h,m,v;return!t&&0<this.length?o(this[0]).data(o.mask.dataName)():(f=o.extend({placeholder:o.mask.placeholder,completed:null},f),a=o.mask.definitions,p=[],h=v=t.length,m=null,o.each(t.split(""),function(e,t){"?"==t?(v--,h=e):a[t]?(p.push(RegExp(a[t])),null===m&&(m=p.length-1)):p.push(null)}),this.trigger("unmask").each(function(){function n(e){for(;v>++e&&!p[e];);return e}function r(e,t){var a,o;if(!(e<0)){for(a=e,o=n(t);a<v;a++)if(p[a]){if(!(o<v&&p[a].test(d[o])))break;d[a]=d[o],d[o]=f.placeholder,o=n(o)}i(),s.caret(Math.max(m,e))}}function c(e,t){for(var a=e;a<t&&a<v;a++)p[a]&&(d[a]=f.placeholder)}function i(){s.val(d.join(""))}function l(e){var t,a=s.val(),o=-1,r=0;for(pos=0;r<v;r++)if(p[r]){for(d[r]=f.placeholder;pos++<a.length;)if(t=a.charAt(pos-1),p[r].test(t)){d[r]=t,o=r;break}if(pos>a.length)break}else d[r]===a.charAt(pos)&&r!==h&&(pos++,o=r);return e?i():o+1<h?(s.val(""),c(0,v)):(i(),s.val(s.val().substring(0,o+1))),h?r:m}var s=o(this),d=o.map(t.split(""),function(e){return"?"!=e?a[e]?f.placeholder:e:void 0}),u=s.val();s.data(o.mask.dataName,function(){return o.map(d,function(e,t){return p[t]&&e!=f.placeholder?e:null}).join("")}),s.attr("readonly")||s.one("unmask",function(){s.unbind(".mask").removeData(o.mask.dataName)}).bind("focus.mask",function(){var e;clearTimeout(y),u=s.val(),e=l(),y=setTimeout(function(){i(),e==t.length?s.caret(0,e):s.caret(e)},10)}).bind("blur.mask",function(){l(),s.val()!=u&&s.change()}).bind("keydown.mask",function(e){var t,a,o=e.which;8===o||46===o||g&&127===o?(t=(a=s.caret()).begin,0==(a=a.end)-t&&(t=46!==o?function(e){for(;0<=--e&&!p[e];);return e}(t):a=n(t-1),a=46===o?n(a):a),c(t,a),r(t,a-1),e.preventDefault()):27==o&&(s.val(u),s.caret(0,l()),e.preventDefault())}).bind("keypress.mask",function(e){var t=e.which,a=s.caret();e.ctrlKey||e.altKey||e.metaKey||t<32||t&&(0!=a.end-a.begin&&(c(a.begin,a.end),r(a.begin,a.end-1)),(a=n(a.begin-1))<v&&(t=String.fromCharCode(t),p[a].test(t)&&(function(e){for(var t,a,o=e,r=f.placeholder;o<v;o++)if(p[o]){if(t=n(o),a=d[o],d[o]=r,!(t<v&&p[t].test(a)))break;r=a}}(a),d[a]=t,i(),a=n(a),k?setTimeout(o.proxy(o.fn.caret,s,a),0):s.caret(a),f.completed&&v<=a&&f.completed.call(s))),e.preventDefault())}).bind(b,function(){setTimeout(function(){var e=l(!0);s.caret(e),f.completed&&e==s.val().length&&f.completed.call(s)},0)}),l()}))}})}(jQuery),function(c){var a={type:"html",content:"",url:"",ajax:{},ajax_request:null,closeOnEsc:!0,closeOnOverlayClick:!0,clone:!1,overlay:{block:void 0,tpl:'<div class="arcticmodal-overlay"></div>',css:{backgroundColor:"#000",opacity:.6}},container:{block:void 0,tpl:'<div class="arcticmodal-container"><table class="arcticmodal-container_i"><tr><td class="arcticmodal-container_i2"></td></tr></table></div>'},wrap:void 0,body:void 0,errors:{tpl:'<div class="arcticmodal-error arcticmodal-close"></div>',autoclose_delay:2e3,ajax_unsuccessful_load:"Error"},openEffect:{type:"fade",speed:400},closeEffect:{type:"fade",speed:400},beforeOpen:c.noop,afterOpen:c.noop,beforeClose:c.noop,afterClose:c.noop,afterLoading:c.noop,afterLoadingOnShow:c.noop,errorLoading:c.noop},i=0,l=c(),s=function(e,t){var a=!0;return c(e).each(function(){c(t.target).get(0)==c(this).get(0)&&(a=!1),0==c(t.target).closest("HTML",c(this).get(0)).length&&(a=!1)}),a},d={transition:function(e,t,a,o){switch(o=null==o?c.noop:o,a.type){case"fade":"show"==t?e.fadeIn(a.speed,o):e.fadeOut(a.speed,o);break;case"none":"show"==t?e.show():e.hide(),o()}},prepare_body:function(e,t){c(".arcticmodal-close",e.body).click(function(){return t.arcticmodal("close"),!1})},init_el:function(t,e){var a,o,r,n=t.data("arcticmodal");if(!n){if(i++,(n=e).modalID=i,n.overlay.block=c(n.overlay.tpl),n.overlay.block.css(n.overlay.css),n.container.block=c(n.container.tpl),n.body=c(".arcticmodal-container_i2",n.container.block),e.clone?n.body.html(t.clone(!0)):(t.before('<div id="arcticmodalReserve'+n.modalID+'" style="display: none" />'),n.body.html(t)),d.prepare_body(n,t),n.closeOnOverlayClick&&n.overlay.block.add(n.container.block).click(function(e){s(c(">*",n.body),e)&&t.arcticmodal("close")}),t.data("arcticmodal",n),l=l.add(t),c.proxy(u.show,t)(),"html"==n.type)return t;null!=n.ajax.beforeSend&&(a=n.ajax.beforeSend,delete n.ajax.beforeSend),null!=n.ajax.success&&(o=n.ajax.success,delete n.ajax.success),null!=n.ajax.error&&(r=n.ajax.error,delete n.ajax.error);e=c.extend(!0,{url:n.url,beforeSend:function(){null==a?n.body.html('<div class="arcticmodal-loading" />'):a(n,t)},success:function(e){t.trigger("afterLoading"),n.afterLoading(n,t,e),null==o?n.body.html(e):o(n,t,e),d.prepare_body(n,t),t.trigger("afterLoadingOnShow"),n.afterLoadingOnShow(n,t,e)},error:function(){t.trigger("errorLoading"),n.errorLoading(n,t),null==r?(n.body.html(n.errors.tpl),c(".arcticmodal-error",n.body).html(n.errors.ajax_unsuccessful_load),c(".arcticmodal-close",n.body).click(function(){return t.arcticmodal("close"),!1}),n.errors.autoclose_delay&&setTimeout(function(){t.arcticmodal("close")},n.errors.autoclose_delay)):r(n,t)}},n.ajax);n.ajax_request=c.ajax(e),t.data("arcticmodal",n)}},init:function(e){if(e=c.extend(!0,{},a,e),!c.isFunction(this))return this.each(function(){d.init_el(c(this),e)});if(null!=e)if(""!=e.type)switch(e.type){case"html":if(""==e.content)return void c.error('jquery.arcticmodal: Don\'t set parameter "content"');var t=e.content;return e.content="",d.init_el(c(t),e);case"ajax":return""==e.url?void c.error('jquery.arcticmodal: Don\'t set parameter "url"'):d.init_el(c("<div />"),e)}else c.error('jquery.arcticmodal: Don\'t set parameter "type"');else c.error("jquery.arcticmodal: Uncorrect parameters")}},u={show:function(){var e,t,a=c(this),o=a.data("arcticmodal");if(o)return o.overlay.block.hide(),o.container.block.hide(),c("BODY").append(o.overlay.block),c("BODY").append(o.container.block),o.beforeOpen(o,a),a.trigger("beforeOpen"),"auto"!=o.wrap.css("overflow")&&(o.wrap.data("arcticmodalOverflow",o.wrap.css("overflow")),e=o.wrap.outerWidth(!0),o.wrap.css("overflow","auto"),(t=o.wrap.outerWidth(!0))!=e&&o.wrap.css("marginRight",t-e+"px")),l.not(a).each(function(){c(this).data("arcticmodal").overlay.block.hide()}),d.transition(o.overlay.block,"show",1<l.length?{type:"none"}:o.openEffect),d.transition(o.container.block,"show",1<l.length?{type:"none"}:o.openEffect,function(){o.afterOpen(o,a),a.trigger("afterOpen")}),a;c.error("jquery.arcticmodal: Uncorrect call")},close:function(){if(!c.isFunction(this))return this.each(function(){var e=c(this),t=e.data("arcticmodal");t?!1!==t.beforeClose(t,e)&&(e.trigger("beforeClose"),l.not(e).last().each(function(){c(this).data("arcticmodal").overlay.block.show()}),d.transition(t.overlay.block,"hide",1<l.length?{type:"none"}:t.closeEffect),d.transition(t.container.block,"hide",1<l.length?{type:"none"}:t.closeEffect,function(){t.afterClose(t,e),e.trigger("afterClose"),t.clone||c("#arcticmodalReserve"+t.modalID).replaceWith(t.body.find(">*")),t.overlay.block.remove(),t.container.block.remove(),e.data("arcticmodal",null),c(".arcticmodal-container").length||(t.wrap.data("arcticmodalOverflow")&&t.wrap.css("overflow",t.wrap.data("arcticmodalOverflow")),t.wrap.css("marginRight",0))}),"ajax"==t.type&&t.ajax_request.abort(),l=l.not(e)):c.error("jquery.arcticmodal: Uncorrect call")});l.each(function(){c(this).arcticmodal("close")})},setDefault:function(e){c.extend(!0,a,e)}};c(function(){a.wrap=c(document.all&&!document.querySelector?"html":"body")}),c(document).bind("keyup.arcticmodal",function(e){var t=l.last();t.length&&t.data("arcticmodal").closeOnEsc&&27===e.keyCode&&t.arcticmodal("close")}),c.arcticmodal=c.fn.arcticmodal=function(e){return u[e]?u[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void c.error("jquery.arcticmodal: Method "+e+" does not exist"):d.init.apply(this,arguments)}}(jQuery);